{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2ae8df3fe98ca1847beb","webpack:///./src/components/popManager/index.js","webpack:///./src/components/eventclass/index.js","webpack:///./src/components/popManager/index.less","webpack:///./src/components/popbase/index.js","webpack:///./src/common/util/index.js"],"names":["initZ","popManager","zIndex","modalFade","instances","popStack","hasOverlay","overlayDom","getInstance","id","register","instance","deregister","nextZIndex","closeCurrentPop","currentPop","length","closeOnClickModal","close","openOverlay","dom","modalClass","i","popLength","popItem","getOverlay","classArr","trim","split","classArrLength","calssIndex","classItem","window","setTimeout","parentNode","nodeType","appendChild","document","body","style","display","push","closeOverlay","item","pop","fixOverlay","splice","me","removeChild","createElement","addEventListener","event","preventDefault","stopPropagation","keyCode","closeOnPressEscape","ClassManager","instanceId","Math","random","getNewInstanceId","classManager","ClassBase","options","_className","_instanceId","EventClass","_handlers","_eventCache","eventName","handler","context","one","newList","l","falseNum","_handler","len","args","apply","eventNames","cache","eventList","ename","fn","Object","prototype","toString","call","bind","dispatch","concat","Array","slice","defaultOptions","autoShow","warp","openDelay","closeDelay","modal","modalAppendToBody","lockScroll","destoryOnClose","timeout","Popbase","newOptions","_createEvent","_initDom","_initEvent","show","container","console","log","isOpened","_closeTimer","clearTimeout","_openTimer","Number","_doOpen","willShow","isOpening","isClosing","closePop","undefined","bodyOverflow","overflow","getComputedStyle","position","_onOpen","_timeout","transition","_doAfterOpen","_doClose","willClose","_onClose","_doAfterClose","destory","Util","merge","target","j","source","prop","hasOwnProperty","value","hasClass","el","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","clsName","add","removeClass","remove","replace","String","scrollBarWidth","getScrollBarWidth","outer","visibility","width","top","widthNoScroll","offsetWidth","inner","widthWithScroll","render","tpl","data","code","join","Function"],"mappings":"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","file":"popbase.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lmfe.ui\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lmfe.ui\"] = factory();\n\telse\n\t\troot[\"lmfe.ui\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"oiW4\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2ae8df3fe98ca1847beb","/**\n * PopupManager\n */\n'use strict';\nimport './index.less';\nimport { addClass, removeClass } from '@common/util';\nconst initZ = 300;\nconst popManager = {\n  // 初始z值\n  zIndex: initZ,\n  // 是否模态\n  modalFade: true,\n  // 弹出层实例对象\n  instances: {},\n  // 弹出层实例对象\n  popStack: [],\n  // 是否显示了遮罩层\n  hasOverlay: false,\n  // 遮罩层dom对象\n  overlayDom: null,\n  // id获取实例\n  getInstance: function(id) {\n    return this.instances[id];\n  },\n  // 注册弹出对象\n  register: function(id, instance) {\n    if (id && instance) {\n      this.instances[id] = instance;\n    }\n  },\n  // 注销弹出对象\n  deregister: function(id) {\n    if (id) {\n      this.instances[id] = null;\n      delete this.instances[id];\n    }\n  },\n  // 获取zIndex\n  nextZIndex: function() {\n    return this.zIndex++;\n  },\n  // 背景dom被点击 关闭最新创建popup\n  closeCurrentPop: function() {\n    const currentPop = this.popStack[this.popStack.length - 1];\n    if (!currentPop) {\n      return;\n    }\n    const instance = this.getInstance(currentPop.id);\n    if (instance && instance.closeOnClickModal) {\n      instance.close();\n    }\n  },\n  // 打开一个遮罩层\n  openOverlay: function(id, zIndex, dom, modalClass, modalFade) {\n    if (!id /* || zIndex === undefined */) {\n      return;\n    }\n    // 判断id唯一性\n    for (let i = 0, popLength = this.popStack.length; i < popLength; i++) {\n      const popItem = this.popStack[i];\n      if (popItem.id === id) {\n        return;\n      }\n    }\n    this.modalFade = modalFade;\n    const overlayDom = this.getOverlay();\n    addClass(overlayDom, 'lmui-overlay');\n    if (this.modalFade && !this.hasOverlay) {\n      addClass(overlayDom, 'lmui-overlay-enter');\n    }\n    if (modalClass) {\n      const classArr = modalClass.trim().split(/\\s+/);\n      const classArrLength = classArr.length;\n      for (let calssIndex = 0; calssIndex < classArrLength; calssIndex++) {\n        const classItem = classArr[calssIndex];\n        addClass(overlayDom, classItem);\n      }\n    }\n    window.setTimeout(() => {\n      removeClass(overlayDom, 'lmui-overlay-enter');\n    }, 300);\n    if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\n      dom.parentNode.appendChild(overlayDom);\n    } else {\n      document.body.appendChild(overlayDom);\n    }\n    overlayDom.style.zIndex = zIndex || initZ;\n    overlayDom.style.display = '';\n    this.popStack.push({\n      id: id,\n      zIndex: zIndex || initZ,\n      modalClass: modalClass\n    });\n  },\n  // 关闭一个遮罩层\n  closeOverlay: function(id) {\n    const { popStack } = this;\n    const overlayDom = this.getOverlay();\n    if (popStack.length > 0) {\n      const currentPop = popStack[popStack.length - 1];\n      if (currentPop.id === id) {\n        if (currentPop.modalClass) {\n          const classArr = currentPop.modalClass.trim().split(/\\s+/);\n          const classArrLength = classArr.length;\n          for (let i = 0; i < classArrLength; i++) {\n            const item = classArr[i];\n            removeClass(overlayDom, item);\n          }\n        }\n        popStack.pop();\n        if (popStack.length > 0) {\n          const pop = popStack[popStack.length - 1];\n          if (pop.fixOverlay) {\n            overlayDom.style.zIndex = initZ;\n          } else {\n            overlayDom.style.zIndex = popStack[popStack.length - 1].zIndex;\n          }\n        }\n      } else {\n        for (let i = popStack.length - 1; i >= 0; i--) {\n          if (popStack[i].id === id) {\n            popStack.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n    if (popStack.length === 0) {\n      if (this.modalFade) {\n        addClass(overlayDom, 'lmui-overlay-leave');\n      }\n      const me = this;\n      window.setTimeout(() => {\n        if (popStack.length === 0) {\n          if (overlayDom.parentNode) {\n            overlayDom.parentNode.removeChild(overlayDom);\n          }\n          overlayDom.style.display = 'none';\n          // 为了避免在300ms内调用新的getOverlay这里需要强调为me.\n          me.overlayDom = null;\n        }\n        removeClass(overlayDom, 'lmui-overlay-leave');\n      }, 300);\n    }\n  },\n  // 获取遮罩层dom 如果没有则创建\n  getOverlay: function() {\n    let { overlayDom } = this;\n    if (overlayDom) {\n      this.hasOverlay = true;\n    } else {\n      this.hasOverlay = false;\n      overlayDom = document.createElement('div');\n      this.overlayDom = overlayDom;\n      overlayDom.addEventListener('touchmove', (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n      });\n      const me = this;\n      overlayDom.addEventListener('click', () => {\n        me.closeCurrentPop && me.closeCurrentPop();\n      });\n    }\n    return overlayDom;\n  }\n};\n\nwindow.addEventListener('keydown', (event) => {\n  if (event.keyCode === 27) {\n    // ESC\n    if (popManager.popStack.length > 0) {\n      const currentPop = popManager.popStack[popManager.popStack.length - 1];\n      if (!currentPop) {\n        return;\n      }\n      const instance = popManager.getInstance(currentPop.id);\n      if (instance.closeOnPressEscape) {\n        instance.close();\n      }\n    }\n  }\n});\n\nexport default popManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/popManager/index.js","/**\n * @namespace\n * @name ClassManager\n */\nimport { merge } from '@common/util';\n\nconst ClassManager = function() {\n  let instanceId = 0 | (Math.random() * 998);\n  this.getNewInstanceId = function() {\n    return instanceId++;\n  };\n};\nconst classManager = new ClassManager();\nclass ClassBase {\n  constructor(options) {\n    merge(this, options);\n    this._className = 'ClassBase';\n    this._instanceId = classManager.getNewInstanceId();\n  }\n\n  className() {\n    return this._className;\n  }\n\n  instanceId() {\n    return this._instanceId;\n  }\n}\n\nexport default class EventClass extends ClassBase {\n  constructor(options) {\n    super(options);\n    this._className = 'EventClass';\n    this._handlers = {};\n    this._eventCache = {};\n  }\n\n  // 绑定监听一次\n  one(eventName, handler, context) {\n    if (!eventName || !handler) {\n      return this;\n    }\n    const { _handlers } = this;\n    if (!_handlers[eventName]) {\n      _handlers[eventName] = [];\n    }\n    _handlers[eventName].push({\n      context: context || this,\n      handler: handler,\n      one: true\n    });\n    return this;\n  }\n\n  // 绑定监听\n  bind(eventName, handler, context) {\n    if (!eventName || !handler) {\n      return this;\n    }\n    const { _handlers } = this;\n    if (!_handlers[eventName]) {\n      _handlers[eventName] = [];\n    }\n    _handlers[eventName].push({\n      context: context || this,\n      handler: handler,\n      one: false\n    });\n    return this;\n  }\n\n  // 接触绑定\n  unbind(eventName, handler) {\n    const { _handlers } = this;\n    if (!eventName) {\n      this._handlers = {};\n      return this;\n    }\n    if (handler) {\n      if (_handlers[eventName]) {\n        const newList = [];\n        for (let i = 0, l = _handlers[eventName].length; i < l; i++) {\n          if (_handlers[eventName][i]['handler'] !== handler) {\n            newList.push(_handlers[eventName][i]);\n          }\n        }\n        _handlers[eventName] = newList;\n      }\n      if (_handlers[eventName] && _handlers[eventName].length === 0) {\n        delete _handlers[eventName];\n      }\n    } else {\n      delete _handlers[eventName];\n    }\n    return this;\n  }\n\n  // 事件派发\n  dispatch(eventName, ...args) {\n    let falseNum = 0;\n    if (!eventName) {\n      return falseNum === 0;\n    }\n    const _handler = this._handlers[eventName];\n    if (_handler) {\n      // const args = Array.prototype.slice.call(arguments, 1);\n      let len = _handler.length;\n      for (let i = 0; i < len;) {\n        if (_handler[i]['handler'].apply(_handler[i]['context'], args) === false) {\n          falseNum++;\n        }\n        if (_handler[i]['one']) {\n          _handler.splice(i, 1);\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n    return falseNum === 0;\n  }\n\n  // 指定上下文的事件派发\n  dispatchWithContext(eventName, context, ...args) {\n    let falseNum = 0;\n    if (!eventName) {\n      return falseNum === 0;\n    }\n    const _handler = this._handlers[eventName];\n    if (this._handler[eventName]) {\n      // const context = arguments[arguments.length - 1];\n      // const args = Array.prototype.slice.call(arguments, 1, arguments.length - 1);\n      let len = _handler.length;\n      for (let i = 0; i < len;) {\n        if (_handler[i]['handler'].apply(context, args) === false) {\n          falseNum++;\n        }\n        if (_handler[i]['one']) {\n          _handler.splice(i, 1);\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n    return falseNum === 0;\n  }\n\n  // 动态添加自定义事件缓存\n  // eventNames 仅仅支持字符串类型数据，空格分割的函数名称，建议事件名都添加 on/before/after 等明显前缀\n  _createEvent(eventNames, ...args) {\n    if (typeof eventNames !== 'string') {\n      return;\n    }\n    const me = this;\n    const cache = me._eventCache;\n    const eventList = eventNames.split(' ');\n    const len = eventList.length;\n    for (let i = 0; i < len; i++) {\n      const eventName = eventList[i];\n      cache[eventName] = cache[eventName] || [];\n      me[eventName] = (function(ename) {\n        return function(fn) {\n          if (Object.prototype.toString.call(fn) === '[object Function]') {\n            me.bind(ename, fn);\n            return me;\n          }\n          return me.dispatch(...[ename].concat(Array.prototype.slice.call(args, 0)));\n        };\n      })(eventName);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/eventclass/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/popManager/index.less\n// module id = ZXKU\n// module chunks = 0 1 2 3 4 5 6 7 10 16","'use strict';\nimport { merge } from '@common/util';\nimport EventClass from '@components/eventclass';\nimport popManager from '@components/popManager';\nconst defaultOptions = {\n  // 是否默认打开\n  autoShow: false,\n  // 外包容器\n  warp: document.body,\n  // 延时打开\n  openDelay: 0,\n  // 延时关闭\n  closeDelay: 0,\n  // 默认zIndex值\n  zIndex: 0,\n  // 是否是模态\n  modal: false,\n  // 模态遮罩动画是否开启\n  modalFade: true,\n  // 模态遮罩是否添加到body上\n  modalAppendToBody: true,\n  // 是否锁定滚动\n  lockScroll: false,\n  // 键盘Esc触发关闭\n  closeOnPressEscape: false,\n  // 点击模态遮罩是否触发关闭\n  closeOnClickModal: false,\n  // 是否关闭时销毁\n  destoryOnClose: true,\n  // 模态遮罩className\n  modalClass: '',\n  // 自动关闭时间\n  timeout: 0,\n  // overlay的zIndex固定\n  fixOverlay: false\n};\nexport default class Popbase extends EventClass {\n  constructor(options) {\n    const newOptions = merge({}, defaultOptions, options);\n    super(newOptions);\n    this._className = 'Popbase';\n    popManager.register(this.instanceId(), this);\n    this._createEvent('onCreate onBeforeShow onShow onBeforeClose onClose onDestory');\n    this._initDom();\n    this._initEvent();\n    window.setTimeout(() => {\n      this.dispatch('onCreate');\n      if (this.autoShow) {\n        this.show();\n      }\n    }, 0);\n  }\n\n  // 初始化dom 该方法需要继承\n  _initDom() {\n    this.container = null;\n  }\n\n  // 初始化事件 该方法需要继承\n  _initEvent() {\n    console.log(this);\n  }\n\n  // 显示pop\n  show() {\n    // 如果已经开启状态 或者 onBeforeShow 返回 false 则不会打开\n    if (this.isOpened || this.dispatch('onBeforeShow') === false) {\n      return;\n    }\n    if (this._closeTimer) {\n      window.clearTimeout(this._closeTimer);\n      this._closeTimer = null;\n    }\n    window.clearTimeout(this._openTimer);\n    const openDelay = Number(this.openDelay);\n    if (openDelay > 0) {\n      // 执行延迟打开逻辑\n      const me = this;\n      this._openTimer = window.setTimeout(() => {\n        me._openTimer = null;\n        me._doOpen();\n      }, openDelay);\n    } else {\n      this._doOpen();\n    }\n  }\n\n  // 执行显示pop\n  _doOpen() {\n    if (this.willShow && !this.willShow()) {\n      return;\n    }\n    this.isOpening = true;\n    const { container, modal, zIndex } = this;\n    if (zIndex) {\n      popManager.zIndex = zIndex;\n    }\n    if (modal) {\n      if (this.isClosing) {\n        // 如果正在执行关闭，则立刻关闭\n        popManager.closePop(this.instanceId());\n        this.isClosing = false;\n      }\n      const { fixOverlay } = this;\n      const nextZIndex = popManager.nextZIndex();\n      // 打开遮罩层\n      popManager.openOverlay(\n        this.instanceId(),\n        fixOverlay ? undefined : nextZIndex,\n        this.modalAppendToBody ? undefined : this.warp,\n        this.modalClass,\n        this.modalFade\n      );\n      if (this.lockScroll) {\n        // 滚动锁定\n        if (!this.bodyOverflow) {\n          // this.bodyPaddingRight = document.body.style.paddingRight;\n          this.bodyOverflow = document.body.style.overflow;\n        }\n        // scrollBarWidth = getScrollBarWidth();\n        // var bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n        // if (scrollBarWidth > 0 && bodyHasOverflow) {\n        //     document.body.style.paddingRight = scrollBarWidth + 'px';\n        // }\n        document.body.style.overflow = 'hidden';\n      }\n    }\n    if (getComputedStyle(container).position === 'static') {\n      container.style.position = 'absolute';\n    }\n    this.isOpened = true;\n    container.style.zIndex = popManager.nextZIndex();\n    // 各个子类自己定义_onOpen\n    this._onOpen && this._onOpen();\n    this.dispatch('onShow');\n    if (this.timeout) {\n      // 如果有定时关闭\n      this._timeout = window.setTimeout(() => {\n        this.close();\n        this._timeout = null;\n      }, this.timeout);\n    }\n    if (!this.transition) {\n      // 如果有过渡\n      this._doAfterOpen();\n    }\n  }\n\n  // 打开完毕后操作\n  _doAfterOpen() {\n    this.isOpening = false;\n  }\n\n  // 关闭\n  close() {\n    if (!this.isOpened || this.dispatch('onBeforeClose') === false) {\n      return;\n    }\n    if (this._openTimer !== null) {\n      window.clearTimeout(this._openTimer);\n      this._openTimer = null;\n    }\n    window.clearTimeout(this._closeTimer);\n    window.clearTimeout(this._timeout);\n    const closeDelay = Number(this.closeDelay);\n    if (closeDelay > 0) {\n      this._closeTimer = window.setTimeout(() => {\n        this._closeTimer = null;\n        this._doClose();\n      }, closeDelay);\n    } else {\n      this._doClose();\n    }\n  }\n\n  // 执行关闭\n  _doClose() {\n    if (this.willClose && !this.willClose()) {\n      return;\n    }\n    this.isClosing = true;\n    if (this.lockScroll) {\n      window.setTimeout(() => {\n        if (this.modal && this.bodyOverflow !== 'hidden') {\n          document.body.style.overflow = this.bodyOverflow;\n          // document.body.style.paddingRight = this.bodyPaddingRight;\n        }\n        this.bodyOverflow = null;\n        // this.bodyPaddingRight = null;\n      }, 300);\n    }\n    this._onClose && this._onClose();\n    this.isOpened = false;\n    this.dispatch('onClose');\n    if (!this.transition) {\n      this._doAfterClose();\n    }\n  }\n\n  // 关闭完毕后操作\n  _doAfterClose() {\n    popManager.closeOverlay(this.instanceId());\n    this.isClosing = false;\n    if (this.destoryOnClose) {\n      this.destory();\n    }\n  }\n\n  // 销毁\n  destory() {\n    this.dispatch('onDestory');\n    popManager.deregister(this.instanceId());\n    popManager.closeOverlay(this.instanceId());\n    if (this.modal && this.bodyOverflow !== null && this.bodyOverflow !== 'hidden') {\n      document.body.style.overflow = this.bodyOverflow;\n      // document.body.style.paddingRight = this.bodyPaddingRight;\n    }\n    this.bodyOverflow = null;\n    // this.bodyPaddingRight = null;\n    if (this.container) {\n      this.container.parentNode.removeChild(this.container);\n    }\n    delete this.container;\n    delete this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/popbase/index.js","const Util = {\n  merge: function(target, ...args) {\n    for (let i = 0, j = args.length; i < j; i++) {\n      const source = args[i] || {};\n      for (const prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          const value = source[prop];\n          if (value !== undefined) {\n            target[prop] = value;\n          }\n        }\n      }\n    }\n    return target;\n  },\n  hasClass: function(el, cls) {\n    if (!el || !cls) {\n      return false;\n    }\n    if (cls.indexOf(' ') !== -1) {\n      throw new Error('className should not contain space.');\n    }\n    if (el.classList) {\n      return el.classList.contains(cls);\n    }\n    return ` ${el.className} `.indexOf(` ${cls} `) > -1;\n  },\n  addClass: function(el, cls) {\n    if (!el) {\n      return;\n    }\n    let curClass = el.className;\n    const classes = (cls || '').split(' ');\n    for (let i = 0, j = classes.length; i < j; i++) {\n      const clsName = classes[i];\n      if (!clsName) {\n        continue;\n      }\n\n      if (el.classList) {\n        el.classList.add(clsName);\n      } else if (!this.hasClass(el, clsName)) {\n        curClass += ` ${clsName}`;\n      }\n    }\n    if (!el.classList) {\n      el.className = curClass;\n    }\n  },\n  removeClass: function(el, cls) {\n    if (!el || !cls) {\n      return;\n    }\n    const classes = cls.split(' ');\n    let curClass = ` ${el.className} `;\n\n    for (let i = 0, j = classes.length; i < j; i++) {\n      const clsName = classes[i];\n      if (!clsName) {\n        continue;\n      }\n\n      if (el.classList) {\n        el.classList.remove(clsName);\n      } else if (this.hasClass(el, clsName)) {\n        curClass = curClass.replace(` ${clsName} `, ' ');\n      }\n    }\n    if (!el.classList) {\n      el.className = String.prototype.trim.call(curClass);\n    }\n  },\n  scrollBarWidth: undefined,\n  getScrollBarWidth: function() {\n    if (this.scrollBarWidth !== undefined) {\n      return this.scrollBarWidth;\n    }\n\n    const outer = document.createElement('div');\n    // outer.className = 'el-scrollbar__wrap';\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.position = 'absolute';\n    outer.style.top = '-9999px';\n    document.body.appendChild(outer);\n\n    const widthNoScroll = outer.offsetWidth;\n    outer.style.overflow = 'scroll';\n\n    const inner = document.createElement('div');\n    inner.style.width = '100%';\n    outer.appendChild(inner);\n\n    const widthWithScroll = inner.offsetWidth;\n    outer.parentNode.removeChild(outer);\n\n    return widthNoScroll - widthWithScroll;\n  },\n  render: function(tpl, data) {\n    const code = `var p=[];with(this){p.push('${tpl\n      .replace(/[\\r\\t\\n]/g, ' ')\n      .split('<%')\n      .join('\\t')\n      .replace(/((^|%>)[^\\t]*)'/g, '$1\\r')\n      .replace(/\\t=(.*?)%>/g, \"',$1,'\")\n      .split('\\t')\n      .join(\"');\")\n      .split('%>')\n      .join(\"p.push('\")\n      .split('\\r')\n      .join(\"\\\\'\")}');}return p.join('');`;\n    return new Function(code).apply(data);\n  }\n};\nexport default Util;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/index.js"],"sourceRoot":""}